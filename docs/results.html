<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; Results – Fire and Police Department Payroll</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./d3graph.html" rel="next">
<link href="./data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./results.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Fire and Police Department Payroll</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/ad4277/payroll" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./results.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d3graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interactive graph</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Appendix</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Possible 10 Charts based on Problem Set1 hitogram / facets (ps1) boxplot jitter (ps1) with ridgeline (ps1) density lines bar chart lump facet scattter plot Density plot geom_point with facet 9x9 grid (ps2 california) Cleveland dot plot ggparcords parcoords likert mosaic alluvium 11</p>
<!-- https://data.cityofnewyork.us/City-Government/Citywide-Payroll-Data-Fiscal-Year-/k397-673e/about_data -->
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>payroll_data_source <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./data_source/Citywide_Payroll_Data__Fiscal_Year__20241111.csv"</span>) </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="ot">&lt;-</span> payroll_data_source</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(payroll_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Fiscal.Year"                "Payroll.Number"            
 [3] "Agency.Name"                "Last.Name"                 
 [5] "First.Name"                 "Mid.Init"                  
 [7] "Agency.Start.Date"          "Work.Location.Borough"     
 [9] "Title.Description"          "Leave.Status.as.of.June.30"
[11] "Base.Salary"                "Pay.Basis"                 
[13] "Regular.Hours"              "Regular.Gross.Paid"        
[15] "OT.Hours"                   "Total.OT.Paid"             
[17] "Total.Other.Pay"           </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(payroll_data_source)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(payroll_data,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  Fiscal.Year Payroll.Number                    Agency.Name Last.Name
1        2020             17 OFFICE OF EMERGENCY MANAGEMENT   BEREZIN
2        2020             17 OFFICE OF EMERGENCY MANAGEMENT    GEAGER
3        2020             17 OFFICE OF EMERGENCY MANAGEMENT    RAMANI
4        2020             17 OFFICE OF EMERGENCY MANAGEMENT     ROTTA
5        2020             17 OFFICE OF EMERGENCY MANAGEMENT WILSON II
  First.Name Mid.Init Agency.Start.Date Work.Location.Borough
1    MIKHAIL                 08/10/2015              BROOKLYN
2   VERONICA        M        09/12/2016              BROOKLYN
3   SHRADDHA                 02/22/2016              BROOKLYN
4   JONATHAN        D        09/16/2013              BROOKLYN
5     ROBERT        P        04/30/2018              BROOKLYN
               Title.Description Leave.Status.as.of.June.30 Base.Salary
1 EMERGENCY PREPAREDNESS MANAGER                     ACTIVE       86005
2 EMERGENCY PREPAREDNESS MANAGER                     ACTIVE       86005
3 EMERGENCY PREPAREDNESS MANAGER                     ACTIVE       86005
4 EMERGENCY PREPAREDNESS MANAGER                     ACTIVE       86005
5 EMERGENCY PREPAREDNESS MANAGER                     ACTIVE       86005
  Pay.Basis Regular.Hours Regular.Gross.Paid OT.Hours Total.OT.Paid
1 per Annum          1820           84698.21        0             0
2 per Annum          1820           84698.21        0             0
3 per Annum          1820           84698.21        0             0
4 per Annum          1820           84698.21        0             0
5 per Annum          1820           84698.21        0             0
  Total.Other.Pay
1               0
2               0
3               0
4               0
5               0</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">names</span>(payroll_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Fiscal.Year"                "Payroll.Number"            
 [3] "Agency.Name"                "Last.Name"                 
 [5] "First.Name"                 "Mid.Init"                  
 [7] "Agency.Start.Date"          "Work.Location.Borough"     
 [9] "Title.Description"          "Leave.Status.as.of.June.30"
[11] "Base.Salary"                "Pay.Basis"                 
[13] "Regular.Hours"              "Regular.Gross.Paid"        
[15] "OT.Hours"                   "Total.OT.Paid"             
[17] "Total.Other.Pay"           </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(payroll_data) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"[</span><span class="sc">\\</span><span class="st">.]+"</span>, <span class="st">"_"</span>, <span class="fu">tolower</span>(<span class="fu">names</span>(payroll_data_source)))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">names</span>(payroll_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "fiscal_year"                "payroll_number"            
 [3] "agency_name"                "last_name"                 
 [5] "first_name"                 "mid_init"                  
 [7] "agency_start_date"          "work_location_borough"     
 [9] "title_description"          "leave_status_as_of_june_30"
[11] "base_salary"                "pay_basis"                 
[13] "regular_hours"              "regular_gross_paid"        
[15] "ot_hours"                   "total_ot_paid"             
[17] "total_other_pay"           </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name, work_location_borough) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'agency_name'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 507 × 3
# Groups:   agency_name [170]
   agency_name               work_location_borough Total_records
   &lt;chr&gt;                     &lt;chr&gt;                         &lt;int&gt;
 1 ADMIN FOR CHILDREN'S SVCS ""                             6627
 2 ADMIN FOR CHILDREN'S SVCS "BRONX"                       14245
 3 ADMIN FOR CHILDREN'S SVCS "BROOKLYN"                    15564
 4 ADMIN FOR CHILDREN'S SVCS "MANHATTAN"                   40037
 5 ADMIN FOR CHILDREN'S SVCS "QUEENS"                       8204
 6 ADMIN FOR CHILDREN'S SVCS "RICHMOND"                     2256
 7 ADMIN TRIALS AND HEARINGS ""                              632
 8 ADMIN TRIALS AND HEARINGS "BRONX"                         457
 9 ADMIN TRIALS AND HEARINGS "BROOKLYN"                      761
10 ADMIN TRIALS AND HEARINGS "MANHATTAN"                    4527
# ℹ 497 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n_distinct</span>(work_location_borough)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 170 × 2
   agency_name                    Total_records
   &lt;chr&gt;                                  &lt;int&gt;
 1 ADMIN FOR CHILDREN'S SVCS                  6
 2 ADMIN TRIALS AND HEARINGS                  6
 3 BOARD OF CORRECTION                        2
 4 BOARD OF CORRECTIONS                       1
 5 BOARD OF ELECTION                          6
 6 BOARD OF ELECTION POLL WORKERS             4
 7 BOROUGH PRESIDENT-BRONX                    2
 8 BOROUGH PRESIDENT-BROOKLYN                 2
 9 BOROUGH PRESIDENT-QUEENS                   2
10 BOROUGH PRESIDENT-STATEN IS                2
# ℹ 160 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name) <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 170 × 2
   agency_name                    Total_records
   &lt;chr&gt;                                  &lt;int&gt;
 1 ADMIN FOR CHILDREN'S SVCS              86933
 2 ADMIN TRIALS AND HEARINGS               7676
 3 BOARD OF CORRECTION                      299
 4 BOARD OF CORRECTIONS                      17
 5 BOARD OF ELECTION                      11695
 6 BOARD OF ELECTION POLL WORKERS        375001
 7 BOROUGH PRESIDENT-BRONX                  714
 8 BOROUGH PRESIDENT-BROOKLYN               912
 9 BOROUGH PRESIDENT-QUEENS                 818
10 BOROUGH PRESIDENT-STATEN IS              568
# ℹ 160 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agency_name_clean =</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"#</span><span class="sc">\\</span><span class="st">d+$"</span>, <span class="st">""</span>, agency_name))) <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name_clean) <span class="sc">|&gt;</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 116 × 2
   agency_name_clean              Total_records
   &lt;chr&gt;                                  &lt;int&gt;
 1 ADMIN FOR CHILDREN'S SVCS              86933
 2 ADMIN TRIALS AND HEARINGS               7676
 3 BOARD OF CORRECTION                      299
 4 BOARD OF CORRECTIONS                      17
 5 BOARD OF ELECTION                      11695
 6 BOARD OF ELECTION POLL WORKERS        375001
 7 BOROUGH PRESIDENT-BRONX                  714
 8 BOROUGH PRESIDENT-BROOKLYN               912
 9 BOROUGH PRESIDENT-QUEENS                 818
10 BOROUGH PRESIDENT-STATEN IS              568
# ℹ 106 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="ot">&lt;-</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agency_name_clean =</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"#</span><span class="sc">\\</span><span class="st">d+$"</span>, <span class="st">""</span>, agency_name)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(agency_name_clean = trimws(gsub("#\\d+$", "", agency_name))) |&gt; </span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name_clean) <span class="sc">|&gt;</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_records))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 116 × 2
   agency_name_clean              Total_records
   &lt;chr&gt;                                  &lt;int&gt;
 1 DEPT OF ED PEDAGOGICAL               1207427
 2 DEPT OF ED PER SESSION TEACHER        997983
 3 POLICE DEPARTMENT                     612076
 4 DEPT OF ED PARA PROFESSIONALS         412698
 5 BOARD OF ELECTION POLL WORKERS        375001
 6 DEPT OF ED HRLY SUPPORT STAFF         255501
 7 FIRE DEPARTMENT                       209272
 8 DEPARTMENT OF EDUCATION ADMIN         181282
 9 DEPT OF PARKS &amp; RECREATION            170200
10 HRA/DEPT OF SOCIAL SERVICES           157963
# ℹ 106 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fiscal_year <span class="sc">==</span> <span class="st">"2024"</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(agency_name_clean <span class="sc">%in%</span>  <span class="fu">c</span>(</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PEDAGOGICAL"</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PER SESSION TEACHER"</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED HRLY SUPPORT STAFF"</span>,<span class="st">"DEPT OF ED PARA PROFESSIONALS"</span>,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PEDAGOGICAL"</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PER DIEM TEACHERS"</span>, </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PER SESSION TEACHER"</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"POLICE DEPARTMENT"</span>,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FIRE DEPARTMENT"</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">|&gt;</span> </span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(agency_name_clean) <span class="sc">|&gt;</span> </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>(),</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_work_location_borough =</span> <span class="fu">n_distinct</span>(work_location_borough)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_records))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  agency_name_clean              Total_records n_work_location_borough
  &lt;chr&gt;                                  &lt;int&gt;                   &lt;int&gt;
1 DEPT OF ED PEDAGOGICAL                108209                       2
2 DEPT OF ED PER SESSION TEACHER         87361                       1
3 POLICE DEPARTMENT                      65901                       5
4 DEPT OF ED PARA PROFESSIONALS          41305                       2
5 DEPT OF ED HRLY SUPPORT STAFF          23545                       1
6 FIRE DEPARTMENT                        21412                       5
7 DEPT OF ED PER DIEM TEACHERS           16662                       1</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fiscal_year <span class="sc">==</span> <span class="st">"2024"</span>) <span class="sc">|&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(agency_name_clean <span class="sc">%in%</span>  <span class="fu">c</span>(</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PEDAGOGICAL"</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PER SESSION TEACHER"</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED HRLY SUPPORT STAFF"</span>,<span class="st">"DEPT OF ED PARA PROFESSIONALS"</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PEDAGOGICAL"</span>,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PER DIEM TEACHERS"</span>, </span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"DEPT OF ED PER SESSION TEACHER"</span>,</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"POLICE DEPARTMENT"</span>,</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FIRE DEPARTMENT"</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">|&gt;</span> </span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(agency_name_clean,work_location_borough) <span class="sc">|&gt;</span> </span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean,work_location_borough)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'agency_name_clean'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 3
# Groups:   agency_name_clean [7]
   agency_name_clean              work_location_borough Total_records
   &lt;chr&gt;                          &lt;chr&gt;                         &lt;int&gt;
 1 DEPT OF ED HRLY SUPPORT STAFF  "MANHATTAN"                   23545
 2 DEPT OF ED PARA PROFESSIONALS  ""                                1
 3 DEPT OF ED PARA PROFESSIONALS  "MANHATTAN"                   41304
 4 DEPT OF ED PEDAGOGICAL         "MANHATTAN"                  103920
 5 DEPT OF ED PEDAGOGICAL         "OTHER"                        4289
 6 DEPT OF ED PER DIEM TEACHERS   "MANHATTAN"                   16662
 7 DEPT OF ED PER SESSION TEACHER "MANHATTAN"                   87361
 8 FIRE DEPARTMENT                "BRONX"                        3249
 9 FIRE DEPARTMENT                "BROOKLYN"                     8911
10 FIRE DEPARTMENT                "MANHATTAN"                    3707
11 FIRE DEPARTMENT                "QUEENS"                       4518
12 FIRE DEPARTMENT                "RICHMOND"                     1027
13 POLICE DEPARTMENT              "BRONX"                        6638
14 POLICE DEPARTMENT              "BROOKLYN"                    12186
15 POLICE DEPARTMENT              "MANHATTAN"                   34818
16 POLICE DEPARTMENT              "QUEENS"                      10575
17 POLICE DEPARTMENT              "RICHMOND"                     1684</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(fiscal_year == "2024") |&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(agency_name_clean <span class="sc">%in%</span>  <span class="fu">c</span>(</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"POLICE DEPARTMENT"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FIRE DEPARTMENT"</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">|&gt;</span> </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(agency_name_clean) <span class="sc">|&gt;</span> </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  agency_name_clean Total_records
  &lt;chr&gt;                     &lt;int&gt;
1 FIRE DEPARTMENT          209272
2 POLICE DEPARTMENT        612076</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(fiscal_year == "2024") |&gt;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(agency_name_clean <span class="sc">%in%</span>  <span class="fu">c</span>(</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"POLICE DEPARTMENT"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FIRE DEPARTMENT"</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">|&gt;</span> </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(agency_name_clean,fiscal_year) <span class="sc">|&gt;</span> </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean,fiscal_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'agency_name_clean'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 3
# Groups:   agency_name_clean [2]
   agency_name_clean fiscal_year Total_records
   &lt;chr&gt;                   &lt;int&gt;         &lt;int&gt;
 1 FIRE DEPARTMENT          2014         16555
 2 FIRE DEPARTMENT          2015         17380
 3 FIRE DEPARTMENT          2016         19934
 4 FIRE DEPARTMENT          2017         18687
 5 FIRE DEPARTMENT          2018         18391
 6 FIRE DEPARTMENT          2019         18679
 7 FIRE DEPARTMENT          2020         19193
 8 FIRE DEPARTMENT          2021         19049
 9 FIRE DEPARTMENT          2022         20920
10 FIRE DEPARTMENT          2023         19072
# ℹ 11 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="ot">&lt;-</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  payroll_data <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(fiscal_year == "2024") |&gt;</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(agency_name_clean <span class="sc">%in%</span>  <span class="fu">c</span>(</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"POLICE DEPARTMENT"</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FIRE DEPARTMENT"</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    )) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fiscal_year <span class="sc">==</span> <span class="st">"2024"</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  fiscal_year   payroll_number  agency_name         last_name        
 Min.   :2024   Min.   :56.00   Length:87313       Length:87313      
 1st Qu.:2024   1st Qu.:56.00   Class :character   Class :character  
 Median :2024   Median :56.00   Mode  :character   Mode  :character  
 Mean   :2024   Mean   :56.25                                        
 3rd Qu.:2024   3rd Qu.:56.00                                        
 Max.   :2024   Max.   :57.00                                        
  first_name          mid_init         agency_start_date  work_location_borough
 Length:87313       Length:87313       Length:87313       Length:87313         
 Class :character   Class :character   Class :character   Class :character     
 Mode  :character   Mode  :character   Mode  :character   Mode  :character     
                                                                               
                                                                               
                                                                               
 title_description  leave_status_as_of_june_30  base_salary       
 Length:87313       Length:87313               Min.   :    11.98  
 Class :character   Class :character           1st Qu.: 53790.00  
 Mode  :character   Mode  :character           Median : 91610.00  
                                               Mean   : 82765.04  
                                               3rd Qu.:105146.00  
                                               Max.   :277605.00  
  pay_basis         regular_hours  regular_gross_paid    ot_hours     
 Length:87313       Min.   :-634   Min.   :-17474     Min.   : -72.0  
 Class :character   1st Qu.:1023   1st Qu.: 32795     1st Qu.:   0.0  
 Mode  :character   Median :2080   Median : 66875     Median : 190.1  
                    Mean   :1548   Mean   : 77730     Mean   : 249.9  
                    3rd Qu.:2080   3rd Qu.:121729     3rd Qu.: 427.4  
                    Max.   :2942   Max.   :289829     Max.   :2091.7  
 total_ot_paid      total_other_pay  agency_name_clean 
 Min.   : -2408.3   Min.   :-29727   Length:87313      
 1st Qu.:   949.1   1st Qu.:  3012   Class :character  
 Median : 12269.7   Median :  9846   Mode  :character  
 Mean   : 21291.7   Mean   : 14044                     
 3rd Qu.: 34277.8   3rd Qu.: 24321                     
 Max.   :215680.3   Max.   :347513                     </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fiscal_year <span class="sc">==</span> <span class="st">"2024"</span>) <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name_clean,title_description) <span class="sc">|&gt;</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    ,<span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean,<span class="fu">desc</span>(Total_records))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 440 × 3
   agency_name_clean title_description                             Total_records
   &lt;chr&gt;             &lt;chr&gt;                                                 &lt;int&gt;
 1 FIRE DEPARTMENT   FIREFIGHTER                                            9804
 2 FIRE DEPARTMENT   EMERGENCY MEDICAL SPECIALIST-EMT                       3968
 3 FIRE DEPARTMENT   LIEUTENANT                                             1620
 4 FIRE DEPARTMENT   EMERGENCY MEDICAL SPECIALIST-PARAMEDIc                 1296
 5 FIRE DEPARTMENT   CAPTAIN                                                 727
 6 FIRE DEPARTMENT   SUPERVISING EMERGENCY MEDICAL SERVICE SPECIA…           657
 7 FIRE DEPARTMENT   BATTALION CHIEF                                         464
 8 FIRE DEPARTMENT   ASSOCIATE FIRE PROTECTION INSPECTOR                     210
 9 FIRE DEPARTMENT   FIRE PROTECTION INSPECTOR                               200
10 FIRE DEPARTMENT   FIRE ALARM DISPATCHER                                   197
# ℹ 430 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="ot">&lt;-</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pay =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(regular_gross_paid, total_ot_paid, total_other_pay)),<span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="ot">&lt;-</span> </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agency_start_date_clean =</span> <span class="fu">mdy</span>(agency_start_date))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(agency_start_date, agency_start_date_clean) <span class="sc">|&gt;</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  agency_start_date agency_start_date_clean
1        12/20/1998              1998-12-20
2        04/25/2016              2016-04-25
3        04/30/1995              1995-04-30
4        12/16/2013              2013-12-16
5        07/11/2012              2012-07-11
6        07/09/2014              2014-07-09</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(payroll_data_fire_police)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  fiscal_year payroll_number       agency_name last_name first_name mid_init
1        2020             56 POLICE DEPARTMENT   MORALES       JOSE         
2        2020             56 POLICE DEPARTMENT     BOYNE     DANIEL        G
3        2020             56 POLICE DEPARTMENT    MURTHA      KEVIN         
4        2020             56 POLICE DEPARTMENT MASTRANDE      JAMES        J
5        2020             56 POLICE DEPARTMENT     AROCA       ALMA        P
6        2020             56 POLICE DEPARTMENT     TABBS     RONALD        G
  agency_start_date work_location_borough                 title_description
1        12/20/1998             MANHATTAN     SUPERVISOR OF SCHOOL SECURITY
2        04/25/2016             MANHATTAN               STATIONARY ENGINEER
3        04/30/1995             MANHATTAN LIEUTENANT D/A SPECIAL ASSIGNMENT
4        12/16/2013             MANHATTAN               STATIONARY ENGINEER
5        07/11/2012             MANHATTAN                    POLICE OFFICER
6        07/09/2014             MANHATTAN                    POLICE OFFICER
  leave_status_as_of_june_30 base_salary pay_basis regular_hours
1                     CEASED     57813.0 per Annum          0.00
2                     ACTIVE       508.8   per Day       2080.00
3                     CEASED    141196.0 per Annum        665.18
4                     ACTIVE       508.8   per Day       2080.00
5                     CEASED     85292.0 per Annum         22.87
6                   ON LEAVE     85292.0 per Annum       1822.85
  regular_gross_paid ot_hours total_ot_paid total_other_pay agency_name_clean
1               0.00     0.00          0.00       650000.00 POLICE DEPARTMENT
2          140146.17  1125.25     117728.07        40696.41 POLICE DEPARTMENT
3           48008.86  2451.57     162000.47        78132.88 POLICE DEPARTMENT
4          140146.17  1007.00     103226.97        27980.42 POLICE DEPARTMENT
5          227914.67     0.00          0.00        30289.83 POLICE DEPARTMENT
6          230597.55    55.27       3071.28        22856.71 POLICE DEPARTMENT
  total_pay agency_start_date_clean
1  650000.0              1998-12-20
2  298570.7              2016-04-25
3  288142.2              1995-04-30
4  271353.6              2013-12-16
5  258204.5              2012-07-11
6  256525.5              2014-07-09</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  fiscal_year payroll_number agency_name last_name first_name mid_init
1           0         243649           0         0          0        0
  agency_start_date work_location_borough title_description
1                 0                     0                 0
  leave_status_as_of_june_30 base_salary pay_basis regular_hours
1                          0           0         0             0
  regular_gross_paid ot_hours total_ot_paid total_other_pay agency_name_clean
1                  0        0             0               0                 0
  total_pay agency_start_date_clean
1         0                       0</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(fiscal_year == "2024") |&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fiscal_year,payroll_number) <span class="sc">|&gt;</span> </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(fiscal_year,payroll_number)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'fiscal_year'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 3
# Groups:   fiscal_year [11]
   fiscal_year payroll_number Total_records
         &lt;int&gt;          &lt;int&gt;         &lt;int&gt;
 1        2014             57         16555
 2        2015             NA         76644
 3        2016             NA         85802
 4        2017             NA         81203
 5        2018             56         59811
 6        2018             57         18391
 7        2019             56         59970
 8        2019             57         18679
 9        2020             56         60316
10        2020             57         19193
11        2021             56         59009
12        2021             57         19049
13        2022             56         60804
14        2022             57         20920
15        2023             56         58617
16        2023             57         19072
17        2024             56         65901
18        2024             57         21412</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(fiscal_year == "2024") |&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name_clean) <span class="sc">|&gt;</span> </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>(),</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">min</span>(agency_start_date_clean),</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">max</span>(agency_start_date_clean)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean,<span class="fu">desc</span>(Total_records))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  agency_name_clean Total_records min(agency_start_date…¹ max(agency_start_dat…²
  &lt;chr&gt;                     &lt;int&gt; &lt;date&gt;                  &lt;date&gt;                
1 FIRE DEPARTMENT          209272 1968-04-22              2024-07-29            
2 POLICE DEPARTMENT        612076 1960-11-14              2049-10-16            
# ℹ abbreviated names: ¹​`min(agency_start_date_clean)`,
#   ²​`max(agency_start_date_clean)`</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># good for alluvium, year start, year paid</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_agency_start_date_clean =</span> <span class="fu">year</span>(agency_start_date_clean)) <span class="sc">|&gt;</span> </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_agency_start_date_clean) <span class="sc">|&gt;</span> </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>(),</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year_agency_start_date_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 62 × 2
   year_agency_start_date_clean Total_records
                          &lt;dbl&gt;         &lt;int&gt;
 1                         1960             1
 2                         1962             9
 3                         1966            10
 4                         1967             3
 5                         1968             9
 6                         1969            15
 7                         1970            39
 8                         1971            25
 9                         1972            20
10                         1973           162
# ℹ 52 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># good for alluvium, year start, year paid</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_agency_start_date_clean =</span> <span class="fu">year</span>(agency_start_date_clean)) <span class="sc">|&gt;</span> </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year_agency_start_date_clean <span class="sc">==</span> <span class="dv">1960</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  fiscal_year payroll_number       agency_name  last_name first_name mid_init
1        2015             NA POLICE DEPARTMENT FITZGERALD       JOAN        T
  agency_start_date work_location_borough title_description
1        11/14/1960             MANHATTAN       STAFF NURSE
  leave_status_as_of_june_30 base_salary pay_basis regular_hours
1                     CEASED       79000 per Annum             0
  regular_gross_paid ot_hours total_ot_paid total_other_pay agency_name_clean
1           13659.74        0             0               0 POLICE DEPARTMENT
  total_pay agency_start_date_clean year_agency_start_date_clean
1  13659.74              1960-11-14                         1960</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fiscal_year <span class="sc">==</span> <span class="st">"2024"</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name_clean,pay_basis) <span class="sc">|&gt;</span> </span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>(),</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOTAL_total_pay =</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOTAL_regular_gross_paid =</span> <span class="fu">sum</span>(regular_gross_paid),</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOTAL_total_ot_paid =</span> <span class="fu">sum</span>(total_ot_paid),</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOTAL_total_other_pay =</span> <span class="fu">sum</span>(total_other_pay),</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">PCT_total_pay =</span> <span class="fu">sum</span>(total_pay) <span class="sc">/</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">PCT_regular_gross_paid =</span> <span class="fu">sum</span>(regular_gross_paid)<span class="sc">/</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">PCT_total_ot_paid =</span> <span class="fu">sum</span>(total_ot_paid)<span class="sc">/</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">PCT_total_other_pay =</span> <span class="fu">sum</span>(total_other_pay)<span class="sc">/</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">records_with_1 =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(regular_gross_paid)),</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">records_with_2 =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(total_ot_paid)),</span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">records_with_3 =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(total_other_pay)),</span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean,pay_basis,<span class="fu">desc</span>(Total_records))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'agency_name_clean'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 14
# Groups:   agency_name_clean [2]
  agency_name_clean pay_basis       Total_records TOTAL_total_pay
  &lt;chr&gt;             &lt;chr&gt;                   &lt;int&gt;           &lt;dbl&gt;
1 FIRE DEPARTMENT   Prorated Annual             7         228256.
2 FIRE DEPARTMENT   per Annum               20848     2567186030.
3 FIRE DEPARTMENT   per Day                   357       50577418.
4 FIRE DEPARTMENT   per Hour                  200        7387331.
5 POLICE DEPARTMENT Prorated Annual             8         317293.
6 POLICE DEPARTMENT per Annum               62083     7122451821.
7 POLICE DEPARTMENT per Day                   691       74276308.
8 POLICE DEPARTMENT per Hour                 3119       49707895.
# ℹ 10 more variables: TOTAL_regular_gross_paid &lt;dbl&gt;,
#   TOTAL_total_ot_paid &lt;dbl&gt;, TOTAL_total_other_pay &lt;dbl&gt;,
#   PCT_total_pay &lt;dbl&gt;, PCT_regular_gross_paid &lt;dbl&gt;, PCT_total_ot_paid &lt;dbl&gt;,
#   PCT_total_other_pay &lt;dbl&gt;, records_with_1 &lt;int&gt;, records_with_2 &lt;int&gt;,
#   records_with_3 &lt;int&gt;</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># format(n=1)</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># format(scientific=TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fiscal_year <span class="sc">==</span> <span class="st">"2024"</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(title_description <span class="sc">==</span> <span class="st">"CHAPLAIN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   fiscal_year payroll_number       agency_name       last_name first_name
1         2024             56 POLICE DEPARTMENT         LIMONGI     CARLOS
2         2024             56 POLICE DEPARTMENT      RECABARREN   JONATHAN
3         2024             56 POLICE DEPARTMENT          KUKIQI      TAHIR
4         2024             56 POLICE DEPARTMENT           LOPEZ    MICHAEL
5         2024             56 POLICE DEPARTMENT           BROWN     VICTOR
6         2024             56 POLICE DEPARTMENT      ANASTASIOU     GEORGE
7         2024             56 POLICE DEPARTMENT WILLIAMS-HARRIS    BARBARA
8         2024             56 POLICE DEPARTMENT          EGUINO    MICHAEL
9         2024             56 POLICE DEPARTMENT          FRANCO     JOSEPH
10        2024             56 POLICE DEPARTMENT         CASSATO      DAVID
11        2024             56 POLICE DEPARTMENT            KASS      ALVIN
12        2024             56 POLICE DEPARTMENT          ROMANO     ROBERT
13        2024             57   FIRE DEPARTMENT       DELENDICK       JOHN
14        2024             57   FIRE DEPARTMENT     GIGANTIELLO      JAMIE
15        2024             57   FIRE DEPARTMENT          HOLMES     PAMELA
16        2024             57   FIRE DEPARTMENT       TURNER JR V. SIMPSON
17        2024             57   FIRE DEPARTMENT     FILACCHIONE       MARC
18        2024             57   FIRE DEPARTMENT         HOFFMAN     JOSEPH
19        2024             57   FIRE DEPARTMENT        POTASNIK     JOSEPH
   mid_init agency_start_date work_location_borough title_description
1         G        10/24/2022             MANHATTAN          CHAPLAIN
2         J        03/27/2017             MANHATTAN          CHAPLAIN
3         M        06/24/2019             MANHATTAN          CHAPLAIN
4                  12/11/2017             MANHATTAN          CHAPLAIN
5                  06/15/2015             MANHATTAN          CHAPLAIN
6         J        06/02/2014             MANHATTAN          CHAPLAIN
7         Y        09/08/2014             MANHATTAN          CHAPLAIN
8         U        08/02/2021             MANHATTAN          CHAPLAIN
9         E        03/27/2017             MANHATTAN          CHAPLAIN
10        L        06/18/2001             MANHATTAN          CHAPLAIN
11                 12/16/1966             MANHATTAN          CHAPLAIN
12        J        10/13/1998             MANHATTAN          CHAPLAIN
13        E        05/15/1996              BROOKLYN          CHAPLAIN
14        J        12/20/2021              BROOKLYN          CHAPLAIN
15        D        09/25/2023              BROOKLYN          CHAPLAIN
16                 11/20/2013              BROOKLYN          CHAPLAIN
17                 10/30/1995              BROOKLYN          CHAPLAIN
18        M        11/19/2001              BROOKLYN          CHAPLAIN
19                 06/25/1998              BROOKLYN          CHAPLAIN
   leave_status_as_of_june_30 base_salary       pay_basis regular_hours
1                      ACTIVE       28713 Prorated Annual       1040.00
2                      ACTIVE       36132 Prorated Annual       1040.00
3                      ACTIVE       70241       per Annum       1820.00
4                      ACTIVE       36133 Prorated Annual       1040.00
5                      ACTIVE       38613 Prorated Annual       1040.00
6                      ACTIVE       39453 Prorated Annual       1037.15
7                      ACTIVE       39453 Prorated Annual       1040.00
8                      ACTIVE       33020 Prorated Annual       1040.00
9                      ACTIVE       36132 Prorated Annual       1040.00
10                     ACTIVE       76176       per Annum       2080.00
11                     ACTIVE       81839       per Annum       2080.00
12                     ACTIVE       81440       per Annum       2080.00
13                     CEASED       32169 Prorated Annual        440.00
14                     ACTIVE       28713 Prorated Annual       1040.00
15                     ACTIVE       33118 Prorated Annual        760.00
16                     ACTIVE       33020 Prorated Annual       1040.00
17                     ACTIVE       33146 Prorated Annual       1040.00
18                     ACTIVE       33093 Prorated Annual       1040.00
19                     ACTIVE       33130 Prorated Annual       1040.00
   regular_gross_paid ot_hours total_ot_paid total_other_pay agency_name_clean
1            27727.30     0.00          0.00          631.00 POLICE DEPARTMENT
2            34891.77     0.00        195.72          631.00 POLICE DEPARTMENT
3            67828.94     0.00       1674.26          631.00 POLICE DEPARTMENT
4            34892.81     4.00        460.61          631.00 POLICE DEPARTMENT
5            37286.87    38.50       1382.44          631.00 POLICE DEPARTMENT
6            35795.97   234.00       8489.87          631.00 POLICE DEPARTMENT
7            38098.41   393.25      15452.32          631.00 POLICE DEPARTMENT
8            31694.66    89.00       3328.63         1131.00 POLICE DEPARTMENT
9            34891.77   184.50       6656.21         1131.00 POLICE DEPARTMENT
10           73537.28     0.00          0.00         6173.67 POLICE DEPARTMENT
11           79005.61     0.00          0.00         7672.90 POLICE DEPARTMENT
12           78620.77     0.00          0.00         8172.90 POLICE DEPARTMENT
13           13538.74     0.00          0.00         1745.04   FIRE DEPARTMENT
14           27727.30    49.00       1308.41         1971.99   FIRE DEPARTMENT
15           23368.10    34.00       1047.12         2102.20   FIRE DEPARTMENT
16           31885.88    99.50       3216.94         3883.34   FIRE DEPARTMENT
17           31996.39    35.00       1188.79         5963.17   FIRE DEPARTMENT
18           31944.64    13.00        440.90         6306.18   FIRE DEPARTMENT
19           31980.53     0.00          0.00         6640.37   FIRE DEPARTMENT
   total_pay agency_start_date_clean
1   28358.30              2022-10-24
2   35718.49              2017-03-27
3   70134.20              2019-06-24
4   35984.42              2017-12-11
5   39300.31              2015-06-15
6   44916.84              2014-06-02
7   54181.73              2014-09-08
8   36154.29              2021-08-02
9   42678.98              2017-03-27
10  79710.95              2001-06-18
11  86678.51              1966-12-16
12  86793.67              1998-10-13
13  15283.78              1996-05-15
14  31007.70              2021-12-20
15  26517.42              2023-09-25
16  38986.16              2013-11-20
17  39148.35              1995-10-30
18  38691.72              2001-11-19
19  38620.90              1998-06-25</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(pay_basis == "Prorated Annual") </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>remove pro_rated data “Prorated Annual”</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fiscal_year <span class="sc">&gt;</span> <span class="st">"2014"</span>) <span class="sc">|&gt;</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name_clean,fiscal_year) <span class="sc">|&gt;</span> </span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>(),</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOTAL_total_pay =</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOTAL_regular_gross_paid =</span> <span class="fu">sum</span>(regular_gross_paid),</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOTAL_total_ot_paid =</span> <span class="fu">sum</span>(total_ot_paid),</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOTAL_total_other_pay =</span> <span class="fu">sum</span>(total_other_pay),</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">PCT_total_pay =</span> <span class="fu">sum</span>(total_pay) <span class="sc">/</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">PCT_regular_gross_paid =</span> <span class="fu">sum</span>(regular_gross_paid)<span class="sc">/</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">PCT_total_ot_paid =</span> <span class="fu">sum</span>(total_ot_paid)<span class="sc">/</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">PCT_total_other_pay =</span> <span class="fu">sum</span>(total_other_pay)<span class="sc">/</span> <span class="fu">sum</span>(total_pay),</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">records_with_1 =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(regular_gross_paid)),</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">records_with_2 =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(total_ot_paid)),</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">records_with_3 =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(total_other_pay)),</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean,fiscal_year,<span class="fu">desc</span>(Total_records))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'agency_name_clean'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 14
# Groups:   agency_name_clean [2]
   agency_name_clean fiscal_year Total_records TOTAL_total_pay
   &lt;chr&gt;                   &lt;int&gt;         &lt;int&gt;           &lt;dbl&gt;
 1 FIRE DEPARTMENT          2015         17380     1634326504.
 2 FIRE DEPARTMENT          2016         19934     1880395463.
 3 FIRE DEPARTMENT          2017         18687     1802155816.
 4 FIRE DEPARTMENT          2018         18391     1831077303.
 5 FIRE DEPARTMENT          2019         18679     1785188573.
 6 FIRE DEPARTMENT          2020         19193     1864413346.
 7 FIRE DEPARTMENT          2021         19049     1932962516.
 8 FIRE DEPARTMENT          2022         20920     2375560620.
 9 FIRE DEPARTMENT          2023         19072     2204518077.
10 FIRE DEPARTMENT          2024         21412     2625379035.
11 POLICE DEPARTMENT        2015         59264     4595729044.
12 POLICE DEPARTMENT        2016         65868     4852944949.
13 POLICE DEPARTMENT        2017         62516     5317984531.
14 POLICE DEPARTMENT        2018         59811     5044058215.
15 POLICE DEPARTMENT        2019         59970     5162359791.
16 POLICE DEPARTMENT        2020         60316     5356858768.
17 POLICE DEPARTMENT        2021         59009     4914698674.
18 POLICE DEPARTMENT        2022         60804     5340976504.
19 POLICE DEPARTMENT        2023         58617     5227427707.
20 POLICE DEPARTMENT        2024         65901     7246753318.
# ℹ 10 more variables: TOTAL_regular_gross_paid &lt;dbl&gt;,
#   TOTAL_total_ot_paid &lt;dbl&gt;, TOTAL_total_other_pay &lt;dbl&gt;,
#   PCT_total_pay &lt;dbl&gt;, PCT_regular_gross_paid &lt;dbl&gt;, PCT_total_ot_paid &lt;dbl&gt;,
#   PCT_total_other_pay &lt;dbl&gt;, records_with_1 &lt;int&gt;, records_with_2 &lt;int&gt;,
#   records_with_3 &lt;int&gt;</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fiscal_year <span class="sc">&gt;</span> <span class="st">"2014"</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name_clean,fiscal_year) <span class="sc">|&gt;</span> </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>(),</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOTAL_total_pay =</span> <span class="fu">n_distinct</span>(title_description)</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean,fiscal_year,<span class="fu">desc</span>(Total_records))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'agency_name_clean'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 4
# Groups:   agency_name_clean [2]
   agency_name_clean fiscal_year Total_records TOTAL_total_pay
   &lt;chr&gt;                   &lt;int&gt;         &lt;int&gt;           &lt;int&gt;
 1 FIRE DEPARTMENT          2015         17380             171
 2 FIRE DEPARTMENT          2016         19934             171
 3 FIRE DEPARTMENT          2017         18687             173
 4 FIRE DEPARTMENT          2018         18391             174
 5 FIRE DEPARTMENT          2019         18679             178
 6 FIRE DEPARTMENT          2020         19193             178
 7 FIRE DEPARTMENT          2021         19049             175
 8 FIRE DEPARTMENT          2022         20920             183
 9 FIRE DEPARTMENT          2023         19072             183
10 FIRE DEPARTMENT          2024         21412             185
11 POLICE DEPARTMENT        2015         59264             239
12 POLICE DEPARTMENT        2016         65868             245
13 POLICE DEPARTMENT        2017         62516             245
14 POLICE DEPARTMENT        2018         59811             247
15 POLICE DEPARTMENT        2019         59970             248
16 POLICE DEPARTMENT        2020         60316             244
17 POLICE DEPARTMENT        2021         59009             247
18 POLICE DEPARTMENT        2022         60804             259
19 POLICE DEPARTMENT        2023         58617             261
20 POLICE DEPARTMENT        2024         65901             255</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_agency_start_date_clean =</span> <span class="fu">year</span>(agency_start_date_clean)) <span class="sc">|&gt;</span> </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year_agency_start_date_clean <span class="sc">==</span> <span class="st">"2024"</span>) <span class="sc">|&gt;</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fiscal_year <span class="sc">&gt;</span> <span class="st">"2014"</span>) <span class="sc">|&gt;</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name_clean,title_description) <span class="sc">|&gt;</span> </span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    ,<span class="fu">mean</span>(base_salary)</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean,<span class="fu">desc</span>(Total_records))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'agency_name_clean'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 46 × 4
# Groups:   agency_name_clean [2]
   agency_name_clean title_description         Total_records `mean(base_salary)`
   &lt;chr&gt;             &lt;chr&gt;                             &lt;int&gt;               &lt;dbl&gt;
 1 FIRE DEPARTMENT   FIREFIGHTER                         266              54122 
 2 FIRE DEPARTMENT   EMERGENCY MEDICAL SPECIA…           221              39430.
 3 FIRE DEPARTMENT   EMERGENCY MEDICAL SPECIA…            91              36330 
 4 FIRE DEPARTMENT   AGENCY ATTORNEY                       2             112938.
 5 FIRE DEPARTMENT   EXECUTIVE AGENCY COUNSEL              2             140187 
 6 FIRE DEPARTMENT   PROGRAM PRODUCER                      2              23511.
 7 FIRE DEPARTMENT   STAFF ANALYST                         2              74698 
 8 FIRE DEPARTMENT   ASSISTANT COMMISSIONER                1             202592 
 9 FIRE DEPARTMENT   AUTO MECHANIC                         1                391.
10 FIRE DEPARTMENT   CASE - MANAGEMENT NURSE               1             100750 
# ℹ 36 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>payroll_data_fire_police <span class="sc">|&gt;</span> </span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(year_agency_start_date_clean = year(agency_start_date_clean)) |&gt; </span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(fiscal_year == "2018") |&gt;</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(title_description <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">"FIREFIGHTER"</span>,<span class="st">"POLICE OFFICER"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agency_name_clean,pay_basis,fiscal_year,title_description) <span class="sc">|&gt;</span> </span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_records =</span> <span class="fu">n</span>()</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    ,<span class="fu">mean</span>(base_salary)</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    ,<span class="fu">mean</span>(total_pay)</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agency_name_clean,<span class="fu">desc</span>(Total_records))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'agency_name_clean', 'pay_basis',
'fiscal_year'. You can override using the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 7
# Groups:   agency_name_clean, pay_basis, fiscal_year [21]
   agency_name_clean pay_basis fiscal_year title_description Total_records
   &lt;chr&gt;             &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;                     &lt;int&gt;
 1 FIRE DEPARTMENT   per Annum        2016 FIREFIGHTER               10484
 2 FIRE DEPARTMENT   per Annum        2024 FIREFIGHTER                9804
 3 FIRE DEPARTMENT   per Annum        2022 FIREFIGHTER                9690
 4 FIRE DEPARTMENT   per Annum        2020 FIREFIGHTER                9085
 5 FIRE DEPARTMENT   per Annum        2019 FIREFIGHTER                8902
 6 FIRE DEPARTMENT   per Annum        2018 FIREFIGHTER                8899
 7 FIRE DEPARTMENT   per Annum        2023 FIREFIGHTER                8773
 8 FIRE DEPARTMENT   per Annum        2017 FIREFIGHTER                8739
 9 FIRE DEPARTMENT   per Annum        2021 FIREFIGHTER                8479
10 FIRE DEPARTMENT   per Annum        2015 FIREFIGHTER                8049
# ℹ 11 more rows
# ℹ 2 more variables: `mean(base_salary)` &lt;dbl&gt;, `mean(total_pay)` &lt;dbl&gt;</code></pre>
</div>
</div>
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   # filter(title_description== "TEACHER- PER SESSION") |> -->
<!--   filter(fiscal_year == "2024") |> -->
<!--   filter(leave_status_as_of_june_30=="ACTIVE") |> -->
<!--   filter(agency_name %in%  c("DEPT OF ED PEDAGOGICAL","DEPT OF ED PER SESSION TEACHER","DEPT OF ED HRLY SUPPORT STAFF","DEPT OF ED PARA PROFESSIONALS", -->
<!-- "DEPT OF ED PEDAGOGICAL", -->
<!-- "DEPT OF ED PER DIEM TEACHERS", -->
<!-- "DEPT OF ED PER SESSION TEACHER"   )) |> -->
<!--   group_by(agency_name,title_description) |> -->
<!--   summarise( -->
<!--     Total_records = n(), -->
<!--     base_salary_sum = sum(base_salary), -->
<!--     base_salary_avg = mean(regular_gross_paid), -->
<!--     base_salary_sum2 = sum(regular_gross_paid), -->
<!--     # total_ot_sum = round(sum(total_ot_pay),0), -->
<!--     total_other_sum = round(sum(total_other_pay),0), -->
<!--     total_paid_sum = round(sum(total_paid),0), -->
<!--     total_paid_avg = mean(total_paid), -->
<!--   ) |> -->
<!--   arrange(desc(Total_records)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   # filter(title_description== "TEACHER- PER SESSION") |> -->
<!--   filter(fiscal_year == "2024") |> -->
<!--   filter(leave_status_as_of_june_30=="ACTIVE") |> -->
<!--   filter(agency_name %in%  c("POLICE DEPARTMENT"   )) |> -->
<!--   group_by(agency_name,work_location_borough,title_description) |> -->
<!--   summarise( -->
<!--     Total_records = n(), -->
<!--     base_salary_sum = sum(base_salary), -->
<!--     base_salary_avg = mean(regular_gross_paid), -->
<!--     base_salary_sum2 = sum(regular_gross_paid), -->
<!--     # total_ot_sum = round(sum(total_ot_pay),0), -->
<!--     total_other_sum = round(sum(total_other_pay),0), -->
<!--     total_paid_sum = round(sum(total_paid),0), -->
<!--     total_paid_avg = mean(total_paid), -->
<!--   ) |> -->
<!--   arrange(agency_name,title_description,work_location_borough) -->
<!--   # arrange(desc(Total_records)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   # filter(title_description== "TEACHER- PER SESSION") |> -->
<!--   # filter(fiscal_year == "2024") |> -->
<!--   filter(leave_status_as_of_june_30=="ACTIVE") |> -->
<!--   filter(agency_name %in%  c("POLICE DEPARTMENT"   )) |> -->
<!--   group_by(title_description) |> -->
<!--   summarise( -->
<!--     Total_records = n(), -->
<!--     base_salary_sum = sum(base_salary), -->
<!--     base_salary_avg = mean(regular_gross_paid), -->
<!--     base_salary_sum2 = sum(regular_gross_paid), -->
<!--     # total_ot_sum = round(sum(total_ot_pay),0), -->
<!--     total_other_sum = round(sum(total_other_pay),0), -->
<!--     total_paid_sum = round(sum(total_paid),0), -->
<!--     total_paid_avg = mean(total_paid), -->
<!--   ) |> -->
<!--   # arrange(title_description) -->
<!--   arrange(desc(Total_records)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   mutate(agency_name_clean = trimws(gsub("#\\d+$", "", Agency.Name))) |> -->
<!--   filter(grepl("DA\\s*$", agency_name_clean, ignore.case = TRUE)) |> -->
<!--   group_by(agency_name_clean,Work.Location.Borough) |> -->
<!--   summarise( -->
<!--     Total_records = n() -->
<!--   ) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   group_by(Work.Location.Borough) |> -->
<!--   summarise( -->
<!--     Total_records = n() -->
<!--   ) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data <- payroll_data |> -->
<!--   mutate(work_location_borough = toupper(work_location_borough)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   group_by(work_location_borough,fiscal_year) |> -->
<!--   summarise( -->
<!--     Total_records = n() -->
<!--   ) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   group_by(title_description) |> -->
<!--   summarise( -->
<!--     Total_records = n() -->
<!--   ) |> -->
<!--   arrange(desc(Total_records)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   filter(title_description== "TEACHER") |> -->
<!--   group_by(title_description) |> -->
<!--   summarise( -->
<!--     Total_records = n(), -->
<!--     base_salary_sum = sum(base_salary), -->
<!--     base_salary_avg = mean(base_salary) -->
<!--   ) |> -->
<!--   arrange(desc(Total_records)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   filter(title_description== "TEACHER- PER SESSION") |> -->
<!--   # filter(fiscal_year == "2024") |> -->
<!--   group_by(agency_name,title_description,work_location_borough) |> -->
<!--   summarise( -->
<!--     Total_records = n(), -->
<!--     base_salary_sum = sum(base_salary), -->
<!--     base_salary_avg = mean(base_salary) -->
<!--   ) |> -->
<!--   arrange(desc(Total_records)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   filter(title_description== "TEACHER") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   filter(title_description== "TEACHER- PER SESSION") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   # filter(title_description== "TEACHER- PER SESSION") |> -->
<!--   # filter(fiscal_year == "2024") |> -->
<!--   filter(agency_name %in%  c("DEPT OF ED PEDAGOGICAL","DEPT OF ED PER SESSION TEACHER")) |> -->
<!--   group_by(agency_name,work_location_borough) |> -->
<!--   summarise( -->
<!--     Total_records = n(), -->
<!--     base_salary_sum = sum(base_salary), -->
<!--     base_salary_avg = mean(base_salary) -->
<!--   ) |> -->
<!--   arrange(desc(Total_records)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   # filter(title_description== "TEACHER- PER SESSION") |> -->
<!--   # filter(fiscal_year == "2024") |> -->
<!--   # filter(agency_name %in%  c("DEPT OF ED PEDAGOGICAL","DEPT OF ED PER SESSION TEACHER")) |> -->
<!--   group_by(agency_name,work_location_borough) |> -->
<!--   summarise( -->
<!--     Total_records = n(), -->
<!--     base_salary_sum = sum(base_salary), -->
<!--     base_salary_avg = mean(base_salary) -->
<!--   ) |> -->
<!--   arrange(desc(agency_name)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   # filter(title_description== "TEACHER- PER SESSION") |> -->
<!--   filter(fiscal_year == "2024") |> -->
<!--   filter(agency_name %in%  c("DEPT OF ED PEDAGOGICAL","DEPT OF ED PER SESSION TEACHER")) |> -->
<!--   group_by(agency_name,work_location_borough,pay_basis) |> -->
<!--   summarise( -->
<!--     Total_records = n(), -->
<!--     base_salary_sum = sum(base_salary), -->
<!--     base_salary_avg = mean(base_salary) -->
<!--   ) |> -->
<!--   arrange(desc(agency_name)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   # filter(title_description== "TEACHER- PER SESSION") |> -->
<!--   # filter(fiscal_year == "2024") |> -->
<!--   filter(pay_basis == "per Annum") |> -->
<!--   # filter(leave_status_as_of_june_30=="ACTIVE") |> -->
<!--   filter(agency_name %in%  c("DEPT OF ED PEDAGOGICAL","DEPT OF ED PER SESSION TEACHER")) |> -->
<!--   group_by(agency_name,fiscal_year,pay_basis,leave_status_as_of_june_30) |> -->
<!--   summarise( -->
<!--     Total_records = n(), -->
<!--     base_salary_sum = sum(base_salary), -->
<!--     base_salary_avg = mean(base_salary) -->
<!--   ) |> -->
<!--   arrange(desc(agency_name)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   filter(title_description== "TEACHER- PER SESSION") |> -->
<!--   filter(fiscal_year == "2024") |> -->
<!--   filter(leave_status_as_of_june_30=="CEASED") |> -->
<!--   filter(agency_name %in%  c("DEPT OF ED PEDAGOGICAL","DEPT OF ED PER SESSION TEACHER")) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data <- payroll_data |> -->
<!--   # mutate(base_salary_std = if_else(pay_basis == "per Day", base_salary * 260, base_salary) |> -->
<!--   mutate( -->
<!--     regular_gross_paid = as.numeric(regular_gross_paid), -->
<!--     total_ot_paid = as.numeric(total_ot_paid), -->
<!--     total_other_pay = as.numeric(total_other_pay) -->
<!--   ) |> -->
<!--   mutate(total_paid = regular_gross_paid +total_ot_paid + total_other_pay) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- head(payroll_data) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--     filter(fiscal_year == "2024") |> -->
<!--   filter(agency_name %in%  c("DEPT OF ED PEDAGOGICAL","DEPT OF ED PER SESSION TEACHER")) |> -->
<!-- ggplot() + -->
<!--     geom_point(mapping = aes(x=base_salary, -->
<!--                              y=regular_gross_paid, -->
<!--                              color = pay_basis -->
<!--                              ), -->
<!--       size = 0.5, -->
<!--       alpha = 0.5, -->
<!--       ) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--     filter(fiscal_year == "2024") |> -->
<!--   filter(agency_name %in%  c("DEPT OF ED PEDAGOGICAL","DEPT OF ED PER SESSION TEACHER")) |> -->
<!-- ggplot() + -->
<!--     geom_point(mapping = aes(x=total_paid, -->
<!--                              y=regular_gross_paid, -->
<!--                              color = leave_status_as_of_june_30 -->
<!--                              ), -->
<!--       size = 0.5, -->
<!--       alpha = 0.5, -->
<!--       )+ -->
<!--    scale_x_continuous(labels = scales::label_comma()) + -->
<!--   scale_y_continuous(labels = scales::label_comma()) + -->
<!--   coord_fixed() -->
<!-- ``` -->
<!-- ```{r} -->
<!-- payroll_data |> -->
<!--   filter(fiscal_year == "2024") |> -->
<!--   filter(agency_name %in%  c("DEPT OF ED PEDAGOGICAL","DEPT OF ED PER SESSION TEACHER")) |> -->
<!-- ggplot() + -->
<!--     geom_point(mapping = aes(x=regular_gross_paid, -->
<!--                              y=total_other_pay, -->
<!--                              color = leave_status_as_of_june_30 -->
<!--                              ), -->
<!--       size = 0.5, -->
<!--       alpha = 0.5, -->
<!--       )+ -->
<!--    scale_x_continuous(labels = scales::label_comma()) + -->
<!--   scale_y_continuous(labels = scales::label_comma()) + -->
<!--   coord_fixed() -->
<!-- ``` -->



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data.html" class="pagination-link" aria-label="Data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./d3graph.html" class="pagination-link" aria-label="Interactive graph">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interactive graph</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions"><ul><li><a href="https://github.com/ad4277/payroll/edit/main/results.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ad4277/payroll/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>